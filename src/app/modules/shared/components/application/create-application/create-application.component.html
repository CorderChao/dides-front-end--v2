<div class="mat-dialog-header" fxLayout="row" fxLayoutAlign="space-between center">
    <div class="header-title">
        <h2 mat-dialog-title>{{ title }}</h2>
        <button type="button" class="btn-close btn-close-white ms-auto"
            style="float: right; font-size: 1rem; padding-top: 20px" data-bs-dismiss="offcanvas" aria-label="Close"
            mat-dialog-close></button>
    </div>
</div>
<mat-dialog-content>
    <div class="p-4 bg-white law-review rounded">
        <form class="form-container" [formGroup]="applicationForm" autocomplete="off">
           
            <div class="row">
                <div class="col-3">
                    <mat-form-field >
                        <mat-label>Region</mat-label>
                        <mat-select formControlName="regionId"  placeholder="Region">
                            <mat-option *ngFor="let region of regions" (click)="onRegionChange(region)" [value]="region.uuid">
                                {{region.name}}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>

                <div class="col-3">
                    <mat-form-field>
                        <mat-label>Council</mat-label>
                        <mat-select formControlName="councilCode" 
                            placeholder="Council">
                            <mat-option *ngFor="let council of councils" (click)="onChangeCouncil(council)" [value]="council.uuid">
                                {{council.name}}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-3">
                    <mat-form-field>
                        <mat-label>Ward</mat-label>
                        <mat-select formControlName="wardCode" placeholder="Ward">
                            <mat-option *ngFor="let ward of wards"  (click)="onChangeWard(ward)" [value]="ward.uuid">
                                {{ward.name}}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>

                <div class="col-3">
                    <mat-form-field>
                        <mat-label>Street</mat-label>
                        <mat-select formControlName="streetCode" placeholder="Street">
                            <mat-option *ngFor="let street of streets" [value]="street.streetCode">
                                {{street.streetName}}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>
</div>
                <div class="row">
                    <div class="col-4">

                        <mat-form-field >
                            <mat-label>Quantity</mat-label>
                            <input matInput type="number" formControlName="quantity" placeholder="Enter Quantity">
                            <mat-error>This field is required!</mat-error>
                        </mat-form-field>
                    </div>
      <div class="col-4">

                        <mat-form-field >
                            <mat-label>Duration</mat-label>
                            <mat-select formControlName="paymentPlanId" placeholder="Duration">
                                <mat-option *ngFor="let plan of paymentPlans" [value]="plan.setupUUID">
                                    {{plan.name}}</mat-option>
                            </mat-select>
                            <mat-error>Please Select item!</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-4">

                        <mat-form-field >
                            <mat-label>Organisation</mat-label>
                            <mat-select formControlName="organizationId" placeholder="Register to">
                                <mat-option *ngFor="let organ of organizations" [value]="organ.uuid">
                                    {{organ.name}}</mat-option>
                            </mat-select>
                            <mat-error>Please Select item!</mat-error>
                        </mat-form-field>
                    </div>
                </div>
<p>Add Items Specification.</p>
 <div class="row">
                <div class="col-4">
                    <mat-form-field>
                        <mat-label>Source Name</mat-label>
                        <mat-select formControlName="source">
                            <mat-option *ngFor="let source of sources" (click)="onSourceChange(source)"
                                [value]="source">{{ source.name}}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-4">
                    <mat-form-field>
                        <mat-label>Sub-Source</mat-label>
                        <mat-select formControlName="subSource">
                            <mat-option *ngFor="let source of subsources" (click)="onSubSourceChange(source)" [value]="source.subSourceUid">{{ source.name
                                }}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-4">
                    <mat-form-field>
                        <mat-label>Item</mat-label>
                        <mat-select formControlName="itemId">
                            <mat-option *ngFor="let item of items" [value]="item.itemUid">{{ item.name
                                }}</mat-option>
                        </mat-select>
                        <mat-error>Please Select item!</mat-error>
                    </mat-form-field>
                </div>
            </div>
<div class="row">



</div>
  <div class="col-lg-12">
    <button class="form-button" type="submit" mat-raised-button mat-fab extended color="primary"
       (click)="save(applicationForm.value)" [disabled]="applicationForm.invalid">
      <mat-icon>save</mat-icon>
      <span class="text-button"> Save </span>
    </button>
  </div>

        </form>
    </div>
</mat-dialog-content>