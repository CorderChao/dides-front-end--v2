<div class="data-table-container">
    <div class="row d-flex">
        <div class="col-md-4  col-12   justify-content-start">
            <div class="table-filter">
                <div class="row">
                    <div class="col-md-12 d-flex search-form-field-container">
                        <mat-form-field class="search-form-field w-100">
                            <input
                                    (keyup)="filterTable()"
                                    [(ngModel)]="searchKey"
                                    autocomplete="off"
                                    matInput
                                    placeholder="Search"
                            />
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12  col-md-8  pb-sm-2 d-flex justify-content-end">
            <div class="contents">
                <app-button
                        (clicked)="getSelectColumns()"
                        buttonName="{{buttonName}}"
                        _icon="ri-add-line align-bottom me-1"
                ></app-button>
            </div>
        </div>
    </div>
    <div @slideInFromLeftAnimation class="mat-elevation-z0 text">
        <div class="table-responsive">
            <table mat-table [dataSource]="listData" matSort>
                <ng-container *ngFor="let tableData of objectKeys(columnHeader); let i = index">
                    <ng-container *ngIf="selectColumn">
                        <ng-container *ngIf="i == 0">
                            <ng-container matColumnDef="{{ tableData }}">
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? toggleAllRows() : null"
                                                  [checked]="selection.hasValue() && isAllSelected()"
                                                  [indeterminate]="selection.hasValue() && !isAllSelected()"
                                                  [aria-label]="checkboxLabel()">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()"
                                                  (change)="$event ? selection.toggle(row) : null"
                                                  [checked]="selection.isSelected(row)"
                                                  [aria-label]="checkboxLabel(row)">
                                    </mat-checkbox>
                                </td>
                            </ng-container>
                        </ng-container>
                    </ng-container>

                    <ng-container *ngIf="i == 1">
                        <!-- SN Column -->
                        <ng-container matColumnDef="{{ tableData }}">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ columnHeader[tableData] }}
                            </th>
                            <td
                                    mat-cell
                                    *matCellDef="let element; let i = index"
                                    class="tbl-min-width"
                            >
                                {{ i + 1 + myPaginator.pageIndex * myPaginator.pageSize }}
                            </td>
                        </ng-container>
                        <!-- end of SN Column -->
                    </ng-container>

                    <ng-container *ngIf="!actionColumn && !selectColumn">
                        <ng-container *ngIf="i > 1">
                            <ng-container matColumnDef="{{ tableData }}">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ columnHeader[tableData] }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <span [innerHtml]="element[tableData] | safeHtml"></span>
                                </td>
                            </ng-container>
                        </ng-container>
                    </ng-container>

                    <ng-container *ngIf="actionColumn">
                        <ng-container
                                *ngIf="i > 1 && i < objectKeys(columnHeader).length - 1"
                        >
                            <ng-container matColumnDef="{{ tableData }}">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ columnHeader[tableData] }}
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <span [innerHtml]="element[tableData] | safeHtml"></span>
                                </td>
                            </ng-container>
                        </ng-container>

                        <ng-container *ngIf="i == objectKeys(columnHeader).length - 1">
                            <ng-container matColumnDef="{{ tableData }}">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    {{ columnHeader[tableData] }}
                                </th>
                                <td mat-cell *matCellDef="let row" class="tbl-min-width">
                                    <ng-container
                                            [ngTemplateOutlet]="actions"
                                            [ngTemplateOutletContext]="{ data: row }"
                                    ></ng-container>
                                </td>
                            </ng-container>
                        </ng-container>
                    </ng-container>
                </ng-container>

                <!-- Table Configurations -->
                <tr mat-header-row *matHeaderRowDef="objectKeys(columnHeader)"></tr>
                <tr
                        mat-row
                        *matRowDef="let row; columns: objectKeys(columnHeader)"
                ></tr>
                <!-- end of Table Configurations -->

                <!-- If No Data Found -->
                <tr class="mat-row no-data-row" *matNoDataRow>
                    <td
                            class="mat-cell text-center"
                            [attr.colspan]="objectKeys(columnHeader).length"
                    >No data to Display
                    </td>
                </tr>
                <!-- end if no Data Found -->

                <!-- Loading Data Message -->
                <ng-container matColumnDef="loading">
                    <tr mat-footer-row *ngIf="listData != null">
                        <td
                                mat-footer-cell
                                *matFooterCellDef
                                [attr.colspan]="objectKeys(columnHeader).length"
                                class="text-center"
                        >
                            Loading ...
                        </td>
                    </tr>
                </ng-container>
                <!-- end of Loading Data Message -->
            </table>
        </div>

        <mat-paginator
            #myPaginator
            [pageSizeOptions]="[5, 10, 50, 100]"
            [pageSize]="10"
            showFirstLastButtons
        >
        </mat-paginator>
    </div>
</div>


